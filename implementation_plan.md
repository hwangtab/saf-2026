# 관리자 작품 데이터 일괄 다운로드 기능 구현 계획서

## 1) 목표

- 관리자 작품 관리 화면에서 작품 데이터를 한 번에 전체 다운로드할 수 있게 한다.
- CSV로 `작가명, 작품명, 이미지, 재료, 년도, 가격`을 포함한 확장 정보를 제공한다.
- 이미지 파일 원본은 CSV에 담을 수 없으므로 이미지 URL 형태로 제공한다.

## 2) 확정 요구사항

1. 다운로드 범위는 `전체 작품`만 지원한다.
2. 작품 관리 페이지에서 버튼으로 바로 다운로드할 수 있어야 한다.
3. 필수 컬럼은 `작가, 작품명, 이미지, 재료, 년도, 가격`을 포함한다.
4. 이미지 파일 자체가 아니라 URL로 제공한다는 점을 명확히 유지한다.

## 3) 구현 범위

### 포함

- `app/admin/artworks/export/route.ts` 신규 추가 (관리자 전용 CSV 다운로드)
- `app/admin/artworks/page.tsx` 헤더 액션에 다운로드 버튼 추가
- `artworks + artists` 조인으로 확장 컬럼 CSV 구성
- 다운로드 실행 시 관리자 활동 로그 기록

### 제외

- 이미지 바이너리(zip) 일괄 다운로드
- 필터별/검색결과별 부분 다운로드
- 엑셀(xlsx) 별도 포맷

## 4) 구현 단계

1. 관리자 권한 검증 포함 export 라우트 구현
2. CSV 컬럼 설계 및 이미지 URL 컬럼 구성
3. 작품 관리 헤더 영역에 다운로드 버튼 배치
4. 활동 로그 기록 추가
5. lint/type-check 검증 수행

## 5) 검증 계획

- 관리자 로그인 상태에서 `/admin/artworks/export` 다운로드 성공 확인
- 비관리자/비로그인 접근 시 401/403 확인
- CSV에 필수 컬럼(작가/작품명/이미지/재료/년도/가격) 포함 확인
- 이미지 URL 컬럼이 정상 채워지는지 확인
- `npm run lint`
- `npm run type-check`

## 6) 완료 기준 (Definition of Done)

1. 작품 관리 페이지에 전체 다운로드 버튼이 노출된다.
2. 전체 작품 행이 CSV로 다운로드된다.
3. 요청된 핵심 컬럼과 확장 정보가 포함된다.
4. 정적 점검(lint/type-check)이 통과한다.
